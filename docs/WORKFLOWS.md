# âš™ï¸ WORKFLOWS.md â€” CI/CD Integration for BuildStamp

BuildStamp is designed to integrate seamlessly with CI/CD pipelines, adding precise build metadata (version, commit, timestamp) to your output artifacts.
You can run it before packaging, after versioning, or as part of a release automation step.

## ğŸ§± Table of Contents

1. Overview

2. GitHub Actions Integration

3. PowerShell Build Pipeline

4. AutoVersion + BuildStamp Combo

5. ZipRelease Integration

6. Example Project Layout

7. Pro Tips

## ğŸ§­ Overview

##### Goal:
Generate a buildinfo.json or BuildInfo.cs file for every build, embedding metadata into your release packages or binaries.

##### Typical flow:
```
AutoVersion â†’ BuildStamp â†’ ZipRelease â†’ CompleteRelease

```

Each step adds a layer of automation:

- AutoVersion handles semantic version bumping

- BuildStamp embeds metadata

- ZipRelease packages distributables

- CompleteRelease orchestrates CI/CD

## ğŸš€ GitHub Actions Integration

##### Create a file:
.github/workflows/build.yml

```
name: Build and Stamp

on:
  push:
    branches: [ main, release/* ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup .NET
        uses: actions/setup-dotnet@v4
        with:
          dotnet-version: 8.0.x

      - name: Install Solcogito Toolchain
        run: |
          dotnet tool install --global Solcogito.AutoVersion
          dotnet tool install --global Solcogito.BuildStamp
          dotnet tool install --global Solcogito.ZipRelease
          echo "$HOME/.dotnet/tools" >> $GITHUB_PATH

      - name: Versioning
        run: autoversion bump patch

      - name: Build
        run: dotnet build --configuration Release

      - name: Stamp Metadata
        run: buildstamp --format json --out ./Builds/buildinfo.json

      - name: Package Release
        run: ziprelease --source ./Builds --version $(cat version.json | jq -r .version)

      - name: Upload Artifact
        uses: actions/upload-artifact@v4
        with:
          name: release-package
          path: ./Builds/

```

## âœ… Result:

Each CI build produces a package containing:
```
Builds/
 â”œâ”€ buildinfo.json
 â”œâ”€ app.zip
 â””â”€ logs/
```

## âš¡ PowerShell Build Pipeline

build.ps1 â€” for local builds or Windows-based CI
```
Write-Host "=== AutoVersion ==="
autoversion bump patch

Write-Host "=== Building Project ==="
dotnet build --configuration Release

Write-Host "=== BuildStamp ==="
buildstamp --format json --out ./Builds/buildinfo.json

Write-Host "=== ZipRelease ==="
ziprelease --source ./Builds --version (Get-Content version.json | ConvertFrom-Json).version

```

ğŸ’¡ Combine with CompleteRelease for a one-line orchestrated pipeline.

## ğŸ§© AutoVersion + BuildStamp Combo

Run AutoVersion first to ensure the version number is accurate before stamping:
```
autoversion bump minor
buildstamp --format cs --out ./src/BuildInfo.cs

```

AutoVersion Output:
```
{
  "version": "0.8.0",
  "previous": "0.7.2",
  "type": "minor"
}

```

BuildStamp Output:
```
internal static class BuildInfo {
    public const string Version = "0.8.0";
    public const string Commit = "a9b31ef";
    public const string Timestamp = "2025-11-04T16:12:11Z";
}

```
Result:
Every build embeds the version that AutoVersion just produced.

## ğŸ§© ZipRelease Integration

When packaging your releases, simply include the stamp:
```
buildstamp --out ./Builds/buildinfo.json
ziprelease --source ./Builds --include buildinfo.json

```

You can even reference the JSON fields for tagging your releases dynamically.

Example GitHub release tag step:
```
- name: Tag Release
  run: |
    VERSION=$(jq -r .version Builds/buildinfo.json)
    git tag "v$VERSION"
    git push origin "v$VERSION"

```

## ğŸ“ Example Project Layout
```
/MyProject
 â”œâ”€ src/
 â”‚   â”œâ”€ Program.cs
 â”‚   â”œâ”€ BuildInfo.cs           â† generated by BuildStamp
 â”‚
 â”œâ”€ Builds/
 â”‚   â”œâ”€ buildinfo.json         â† generated metadata
 â”‚   â”œâ”€ output.zip             â† packaged by ZipRelease
 â”‚
 â”œâ”€ .github/workflows/
 â”‚   â””â”€ build.yml
 â”‚
 â”œâ”€ build.ps1
 â”œâ”€ version.json
 â”œâ”€ README.md
 â””â”€ LICENSE

```

## ğŸ§  Pro Tips

- Always run BuildStamp after AutoVersion, never before.

- Store buildinfo.json inside /Builds/ or /dist/ for cleanliness.

- Use jq or PowerShell JSON parsing to extract version fields dynamically.

- Add the following to .gitignore:
```
/Builds/buildinfo.json
/src/BuildInfo.cs

```

- For reproducible builds:
	Use --timestamp with a fixed ISO string in CI environments.

## ğŸ”— Related Docs
|File	|Purpose|
|-------|-------|
|BUILDSTAMP.md|	Technical reference & options|
|README.md|	Overview & setup|
|GUMROAD_PAGE.md|	Product page & tier details|

## ğŸªª License

MIT (Lite) Â· Commercial (Pro)
(c) 2025 Solcogito S.E.N.C.